<!DOCTYPE html
  PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Embedding Schematron in XML Schema Documents, 1.0alpha4</title><style type="text/css" media="all">body { font-family: "Times New Roman", Times, serif; background-color: #FFF; color: #000; margin: 3em; } p.todo { color: #000; background-color: #FCC; } a { text-decoration: none; color: #000; background-color: #FFF; } span.issue, span.issue a { color: #000; background-color: #FCC; } a[href]:hover { color: #000; background-color: #F9FAD4; } a.url { font-family: "Courier New", Courier, monospace; font-size: 80%; } a.ref, span.ref { font-weight: bold; } span.termRef::before { content: "·"; } span.termRef::after { content: "·"; } div.img { width: 100%; text-align: center; } img { width: 100%; } div.table { } div.table > table { margin: auto; } div.title { font-size: 200%; font-weight: bold; margin: 1em 5em; text-align: center; } div.subtitle { font-size: 150%; font-weight: bold; margin: 1em 5em; text-align: center; } div.heading { font-size: 125%; font-weight: bold; margin-top: 1em; margin-bottom: 1em; page-break-after: avoid; page-break-inside: avoid; } div.rule-section > div.heading { font-size: 100%; } div.section, div.rule-section { margin-left: 2em; } div.section div.section { margin-left: 0; } div.section div.heading { margin-left: -2em; } div.meta { width: 33%; float: right; clear: right; } div.meta > p { padding: 0; margin: 0; } div.box, div.meta { background-color: #EEE; color: #000; border: solid black 1px; padding: 1.0em; } div.box a, div.meta a { background-color: #EEE; color: #000; } div.box a:hover, div.meta a:hover { background-color: #F9FAD4; color: #000; } div.box + div.box, div.figure + div.box { margin-top: 1em; } div.normativeHead { font-weight: bold; margin-bottom: 1em; } dfn { font-style: normal; font-weight: bold; } div.sub { margin-left: 2em; } div.sub > *:last-child { margin-bottom: 0; } td,th { border: solid black 1px; } th { color: #000; background-color: #EEE; } table { border-collapse: collapse; } code { font-family: "Courier New", Courier, monospace; font-size: 80%; } pre { font-family: "Courier New", Courier, monospace; font-size: 80%; white-space: pre-wrap; margin: 0; } div.caption { font-weight: bold; text-align: center; page-break-after: avoid; page-break-inside: avoid; } p.hang { text-indent: -2em; margin-left: 2em; } q { quotes: '\201C' '\201D' '\2018' '\2019'; } q:before { content: open-quote; } q:after { content: close-quote; } ol ol > li { list-style-type: upper-alpha; }</style></head><body><div class="title">Embedding Schematron in XML Schema Documents</div><div class="subtitle">Version 1.0alpha4</div><div class="subtitle">March 16, 2016</div><div class="subtitle">NIEM Technical Architecture Committee (NTAC)</div><div class="section"><div class="heading"><a name="d3e18"></a>Authors</div><p>Webb Roberts, Georgia Tech Research Institute (<a class="url" target="_blank" href="mailto:webb.roberts@gtri.gatech.edu">&lt;webb.roberts@gtri.gatech.edu&gt;</a>), Lead Author</p></div><div class="section"><div class="heading"><a name="d3e30"></a>Abstract</div><p>The <em>Embedding Schematron in XML Schema Documents</em> specification, version 1.0alpha4, provides methods that simplify the use of Schematron with XML Schema documents.</p></div><div class="section"><div class="heading"><a name="d3e42"></a>Document Status</div><p>This document is an early draft product of the NIEM Technical Architecture Committee (NTAC). This version of this document is not normative. The release version of this document will be normative when approved by the NTAC.</p></div><div class="section"><div class="heading"><a name="toc"></a>Table of Contents</div><ul><li><a href="#section_1">1. Introduction</a><ul><li><a href="#section_1.1">1.1. Background</a></li><li><a href="#section_1.2">1.2. Methodology</a></li><li><a href="#section_1.3">1.3. Objectives</a><ul><li><a href="#section_1.3.1">1.3.1. Clarify processing requirements</a></li><li><a href="#section_1.3.2">1.3.2. Unify XML Schema document namespace declarations with Schematron’s</a></li><li><a href="#section_1.3.3">1.3.3. Provide for bare asserts, reports, and let</a></li></ul></li></ul></li><li><a href="#section_2">2. Terminology</a><ul><li><a href="#section_2.1">2.1. RFC 2119 terminology</a></li><li><a href="#section_2.2">2.2. XML</a></li><li><a href="#section_2.3">2.3. XML Namespaces</a></li><li><a href="#section_2.4">2.4. XML Information Set</a></li><li><a href="#section_2.5">2.5. XML Schema</a></li><li><a href="#section_2.6">2.6. XSLT 2.0</a></li><li><a href="#section_2.7">2.7. Schematron</a></li><li><a href="#section_2.8">2.8. NIEM Conformance Target Attribute Specification</a></li><li><a href="#section_2.9">2.9. NIEM Naming and Design Rules</a></li></ul></li><li><a href="#section_3">3. Namespaces used in this document</a></li><li><a href="#section_4">4. Terms and Definitions</a></li><li><a href="#section_5">5. Rules</a><ul><li><a href="#section_5.1">5.1. XML Schema rules</a></li><li><a href="#section_5.2">5.2. Conformance target rules</a></li><li><a href="#section_5.3">5.3. Rules on <code>six:queryBinding</code></a></li><li><a href="#section_5.4">5.4. Rules on namespaces</a></li><li><a href="#section_5.5">5.5. Schematron throughout the document</a></li><li><a href="#section_5.6">5.6. Occurrence of Schematron content</a></li><li><a href="#section_5.7">5.7. Top-level attribute declaration</a></li><li><a href="#section_5.8">5.8. Top-level element declaration</a></li><li><a href="#section_5.9">5.9. Top-level complex type definition</a></li><li><a href="#section_5.10">5.10. Top-level simple type definition</a></li><li><a href="#section_5.11">5.11. Element use within a complex type</a></li><li><a href="#section_5.12">5.12. Attribute use within a complex type</a></li></ul></li><li><a href="#section_6">6. XPath functions usable within XSLT 2.0 Schematron expressions</a><ul><li><a href="#section_6.1">6.1. Function <code>six:resolve</code></a></li></ul></li><li><a href="#appendix_A">Appendix A. References</a></li><li><a href="#appendix_B">Appendix B. Schema document for Schematron in XSD vocabulary (informative)</a></li><li><a href="#appendix_C">Appendix C. Index of Rules</a></li><li><a href="#appendix_D">Appendix D. Index of Definitions</a></li></ul></div><div class="section"><div class="heading"><a name="section_1"></a>1. Introduction</div><p>The <em>Embedding Schematron in XML Schema Documents</em> specification, version 1.0alpha4, provides methods that simplify the use of Schematron with XML Schema documents. The following sections describe the objectives and methods of this specficiation.</p><div class="section"><div class="heading"><a name="section_1.1"></a>1.1. Background</div><p><a href="#ref-sch" class="ref">[Schematron]</a> does not specify any methods or provide recommendations for the use of Schematron XML Schema within XML Schema. It provides Annex F, <em>Use of Schematron as a Vocabulary</em>, which identifies Schematron elements that are fit to be used within other vocabularies.</p><p>Prior to this specfication, Schematron rules have been embedded in XML Schema documents by putting <code>sch:ns</code>, <code>sch:title</code>, <code>sch:phase</code>, and <code>sch:pattern</code> elements within <code>xs:appinfo</code> in XML Schema documents. This is supported by the XSLT <q>ExtractSchFromXSD-2.xsl</q>, which is part of the <q>iso-schematron-xslt2.zip</q> distribution provided at <a class="url" target="_blank" href="http://www.schematron.com/implementation.html">http://www.schematron.com/implementation.html</a>. That XSLT processes embedded Schematron into a separate Schematron file with an <q>xslt2</q> query binding.</p></div><div class="section"><div class="heading"><a name="section_1.2"></a>1.2. Methodology</div><p>This specification defines a methodology for adding Schematron rules to an XML Schema document, and specifies how those rules are to be interpreted. Goals include:</p><ul><li>Simplify the use of Schematron in XML Schema by avoiding Schematron-specific namespace declarations, and allowing bare <code>sch:assert</code> rules, with context identified by the XML Schema components on which they are defined.</li><li>Allow for rules to be executed using a variety of XSLT processors, and to clarify which XSLT processors can handle Schematron rules.</li><li>Ensure that rules can be used within a variety of XML Schema document sets, by ensuring that rule contexts accomodate rules on types, attributes, and derived schema components (i.e., derived types and elements using element substitution).</li></ul><p>Schemas that conform to this specification include Schematron rules on XML Schema components within <code>xs:appinfo</code>. Those rules are extracted to Schematron files. Those Schematron files may target an XSLT 1 processor, XSLT 2 <a name="d3e145"></a><a href="#definition_basic_XSLT_processor"><span class="termRef">basic XSLT processor</span></a>, or XSLT 2 <a name="d3e148"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>. Those Schematron files can also be made portable, to run with over those components regardless of how they are used within a schema. For example, a rule on a complex type can be applied to any element of that complex type.</p><p>This specification establishes processing requirements by establishing characteristics of an <a name="d3e154"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a>, which is a Schematron document that results from correct processing of a <a name="d3e157"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a>. Rather than specifying details of exactly how to process a schema document with embedded Schematron, it provides high-level requirements. For example, a <code>sch:assert</code> on an element declaration is required to correspond to a <code>sch:pattern</code> with an <code>sch:rule</code> with a context that applies to any instance of the specified element, and to any element in the substitution group of that element. How this is accomplished might differ between a Schematron document targeted to an XSLT 1 processor and one targeted to an XSLT 2 <a name="d3e170"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</p></div><div class="section"><div class="heading"><a name="section_1.3"></a>1.3. Objectives</div><p>This section outlines some issues with embedding Schematron in XML Schema documents, and how this specification resolves them.</p><div class="section"><div class="heading"><a name="section_1.3.1"></a>1.3.1. Clarify processing requirements</div><p>This specification refines the query binding construct defined by <a href="#ref-sch" class="ref">[Schematron]</a>, to make it clarify what kind of XSLT processor is needed to process Schematron rules within an XML Schema document.</p><p><a href="#ref-sch" class="ref">[Schematron]</a> <a target="_blank" href="">Section 6.4, <em>Query Language Binding</em></a>, provides a query language binding, which identifies the language used by <code>sch:assert</code> <code>test</code> attributes, <code>sch:value-of</code> <code>select</code> attributes, and other queries on data. It provides a list of recommended names for query languages, however:</p><ul><li>It does not specify what is meant by any given query language name.</li><li>It does not specify what is required of a processor that processes Schematron with any given query language.</li><li>It does not distinguish between the capability of <code>xslt</code> and <code>xpath</code>, or between <code>xpath2</code> and <code>xslt2</code>.</li><li>It does not distinguish between XSLT 2.0’s <a name="d3e245"></a><a href="#definition_basic_XSLT_processor"><span class="termRef">basic XSLT processor</span></a> and <a name="d3e248"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</li></ul><p>These shortcomings mean that it is difficult for a Schematron processor to know if it will be able to execute a set of Schematron rules with a given XSLT processor.</p><p>This specification provides an attribute, <code>six:queryBinding</code>, which tells which XSLT processors that are capable of executing the Schematron rules within the schema document. The attribute has a list of values:</p><ul><li>xslt1: the rules may be executed by an XSLT 1 processor.</li><li>xslt2: the rules may be excuted by an XSLT 2 <a name="d3e272"></a><a href="#definition_basic_XSLT_processor"><span class="termRef">basic XSLT processor</span></a> or a <a name="d3e275"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</li><li>xslt2-sa: the rules may be excuted by an XSLT 2 <a name="d3e282"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</li></ul><p>The example in <a href="#figure_1-1">Figure 1-1, <em>Example of <code>six:queryBinding</code> specifying XSLT 2</em>, below,</a> indicates that embedded Schematron rules would run on any XSLT 2 processor: a <a name="d3e291"></a><a href="#definition_basic_XSLT_processor"><span class="termRef">basic XSLT processor</span></a> or an XSLT 2 <a name="d3e294"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</p><div class="figure"><div class="caption"><a name="figure_1-1"></a>Figure 1-1: Example of <code>six:queryBinding</code> specifying XSLT 2</div><div class="box"><pre>&lt;xs:schema
    six:queryBinding="xslt2"
    xmlns:six="http://release.niem.gov/niem/sch-in-xsd/1.0/"&gt;
  ...
&lt;/xs:schema&gt;</pre></div></div><p>The example in <a href="#figure_1-2">Figure 1-2, <em>Example of <code>six:queryBinding</code> specifying XSLT 1 and XSLT 2</em>, below,</a> indicates that embedded Schematron rules would run on an XSLT 1 processor, an XSLT 2 <a name="d3e318"></a><a href="#definition_basic_XSLT_processor"><span class="termRef">basic XSLT processor</span></a> or an XSLT 2 <a name="d3e321"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</p><div class="figure"><div class="caption"><a name="figure_1-2"></a>Figure 1-2: Example of <code>six:queryBinding</code> specifying XSLT 1 and XSLT 2</div><div class="box"><pre>&lt;xs:schema
    six:queryBinding="xslt1 xslt2"
    xmlns:six="http://release.niem.gov/niem/sch-in-xsd/1.0/"&gt;
  ...
&lt;/xs:schema&gt;</pre></div></div><p>The example in <a href="#figure_1-3">Figure 1-3, <em>Example of <code>six:queryBinding</code> specifying a schema-aware XSLT processor</em>, below,</a> indicates that embedded Schematron rules would run on an XSLT 2 <a name="d3e346"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</p><div class="figure"><div class="caption"><a name="figure_1-3"></a>Figure 1-3: Example of <code>six:queryBinding</code> specifying a schema-aware XSLT processor</div><div class="box"><pre>&lt;xs:schema
    six:queryBinding="xslt2-sa"
    xmlns:six="http://release.niem.gov/niem/sch-in-xsd/1.0/"&gt;
  ...
&lt;/xs:schema&gt;</pre></div></div><p>This method of defining processor requirements for Schematron rules has advantages:</p><ul><li>It narrows the options down to fielded XSLT processors: XSLT 1 and XSLT 2 processors.</li><li>It distinguishes between XSLT 2.0’s <a name="d3e380"></a><a href="#definition_basic_XSLT_processor"><span class="termRef">basic XSLT processor</span></a> and its <a name="d3e383"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</li><li>It supports Schematron rules that can be executed with both an XSLT 1 and an XSLT 2 processor.</li></ul></div><div class="section"><div class="heading"><a name="section_1.3.2"></a>1.3.2. Unify XML Schema document namespace declarations with Schematron’s</div><p>This specification simplifies namespace declarations used in embedded Schematron statements, because it ensures the XML prefixes defined and used in XML Schema documents are also used for Schematron rules.</p><p>Schematron defines its own mechanism (<code>sch:ns</code>) for binding namespace prefixes to namespace URIs. The naive approach, of scraping embedded Schematron into a separate Schematron file, would mean that most namespace declarations must be defined twice: once how XML and XML Schema do it, and again for Schematron using <code>sch:ns</code>.</p><p>The example in <a href="#figure_1-4">Figure 1-4, <em>Example of <code>sch:ns</code></em>, below,</a> shows an XML prefix declaration for prefix <q>sch</q>, and a Schematron namespace declaration for namespace <q>xs</q>. Only Schematron namespace declarations may be used in Schematron <code>sch:rule</code> <code>context</code> attributes, <code>sch:assert</code> <code>test</code> attributes, and other XPath expressions within the Schematron rules.</p><div class="figure"><div class="caption"><a name="figure_1-4"></a>Figure 1-4: Example of <code>sch:ns</code></div><div class="box"><pre>&lt;sch:schema
    xmlns:sch="http://purl.oclc.org/dsdl/schematron"&gt;
  ...
  &lt;sch:ns prefix="xs" uri="http://www.w3.org/2001/XMLSchema"/&gt;
  ...
&lt;/sch:schema&gt;</pre></div></div><p>This introduces problems:</p><ul><li>Namespaces for Schematron must be maintained separately from namespaces for XML Schema, requiring additional work.</li><li>Namespace bindings in Schematron and XML Schema could differ, misleading users and developers, who expect a prefix (such as <q>nc</q>) to mean only one thing.</li></ul><p>This specification ensures that the standard XML method of specifying namespace prefixes propagates to embedded Schematron rules. It does this by requiring that namespace declarations appear only on the schema document’s document element. This ensures that the document does not define namespace prefixes elsewhere in the document, which can’t be represented in a Schematron document.</p><div class="figure"><div class="caption"><a name="figure_1-5"></a>Figure 1-5: Example of XML namespaces</div><div class="box"><pre>&lt;xs:schema
   xmlns:sch="http://purl.oclc.org/dsdl/schematron"
   xmlns:xs="http://www.w3.org/2001/XMLSchema"&gt;
  ...
&lt;/xs:schema&gt;</pre></div></div></div><div class="section"><div class="heading"><a name="section_1.3.3"></a>1.3.3. Provide for bare asserts, reports, and let</div><p>This specification provides for bare <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code> as <a name="d3e508"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> on some schema components, which greatly simplifies the use of Schematron in XML Schema documents.</p><p>The conventional use of Schematron in XML Schema documents consists of putting <code>sch:pattern</code> elements in <code>xs:appinfo</code> annotations. Suppose this is in the <code>nc</code> namespace:</p><div class="figure"><div class="caption"><a name="figure_1-6"></a>Figure 1-6: Example of <code>sch:pattern</code> in an element declaration</div><div class="box"><pre>&lt;xs:element name="PersonFullName" type="nc:PersonNameTextType"&gt;
  &lt;xs:annotation&gt;
    &lt;xs:appinfo&gt;
      &lt;sch:pattern&gt;
        &lt;sch:rule context="nc:PersonName"&gt;
          &lt;sch:assert test="count(nc:PersonGivenName) = 1"
            &gt;Element must have one nc:PersonGivenName.&lt;/sch:assert&gt;
        &lt;/sch:rule&gt;
      &lt;/sch:pattern&gt;
    &lt;/xs:appinfo&gt;
  &lt;/xs:annotation&gt;                
&lt;/xs:element&gt;              </pre></div></div><p>This example has issues:</p><ul><li>Although the rule is attached to element <code>nc:PersonFullName</code>, it describes a chracteristic of element <code>nc:PersonName</code>. The context of the rule is not what one would expect, and removing this component from a subset would remove a rule unrelated to the component. It is best to make a rule apply to the component on which it is attached.</li><li>Since the context is explicit (instead of coming from a schema component definition), changing the name of the component would cause the rule to not apply, instead of having the rule apply to the renamed component.</li><li>Since the rule’s context is <code>nc:PersonName</code>, it would not apply to elements derived from that element via <code>substitutionGroup</code>. It is best to stay true to the Liskov Substitution Principel, and ensure that rules for a component also hold for derived components.</li></ul><p>This specification allows the use of <code>sch:pattern</code> as shown above, but it also allows a schema component to have <code>sch:assert</code>, <code>sch:report</code>, and <code>sch:let</code> without <code>sch:pattern</code> and <code>sch:rule</code>. For example:</p><div class="figure"><div class="caption"><a name="figure_1-7"></a>Figure 1-7: Example of <code>sch:pattern</code> in <code>xs:appinfo</code></div><div class="box"><pre>&lt;xs:element name="PersonName" type="nc:PersonNameType"&gt;
  &lt;xs:annotation&gt;
    &lt;xs:appinfo&gt;
      &lt;sch:assert test="count(nc:PersonGivenName) = 1"
        &gt;Element must have one nc:PersonGivenName.&lt;/sch:assert&gt;
    &lt;/xs:appinfo&gt;
  &lt;/xs:annotation&gt;                
&lt;/xs:element&gt;              </pre></div></div><p>Advantages include:</p><ul><li>Rule contexts always match the component on which rules appear.</li><li>Rule contexts don’t have to be separately maintained.</li><li>Rule contexts can work with an XSLT 1.0 processor, an XSLT 2.0 <a name="d3e660"></a><a href="#definition_basic_XSLT_processor"><span class="termRef">basic XSLT processor</span></a>, or an XSLT 2.0 <a name="d3e663"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</li><li>Rule contexts can apply to derived components, including elements derived through substitution, and elements of derived types.</li><li>Rule contexts can apply to elements and attributes of specified types, and to components using derived types.</li></ul></div></div></div><div class="section"><div class="heading"><a name="section_2"></a>2. Terminology</div><p>This document relies on terminology defined by other specifications and standards, as well as terminology specific to this specification. This section introduces many terms, and directs the reader to the external source definition of a term when appropriate. The following sections reflect the different sources and topics of this terminology:</p><ul><li><a href="#section_2.1">Section 2.1, <em>RFC 2119 terminology</em></a></li><li><a href="#section_2.2">Section 2.2, <em>XML</em></a></li><li><a href="#section_2.3">Section 2.3, <em>XML Namespaces</em></a></li><li><a href="#section_2.4">Section 2.4, <em>XML Information Set</em></a></li><li><a href="#section_2.5">Section 2.5, <em>XML Schema</em></a></li><li><a href="#section_2.6">Section 2.6, <em>XSLT 2.0</em></a></li><li><a href="#section_2.7">Section 2.7, <em>Schematron</em></a></li><li><a href="#section_2.8">Section 2.8, <em>NIEM Conformance Target Attribute Specification</em></a></li><li><a href="#section_2.9">Section 2.9, <em>NIEM Naming and Design Rules</em></a></li></ul><div class="section"><div class="heading"><a name="section-terminology-rfc-2119"></a><a name="section_2.1"></a>2.1. RFC 2119 terminology</div><p>Within normative content (rules and definitions), the key words MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in <a href="#RFC2119" class="ref">[RFC2119]</a>.</p></div><div class="section"><div class="heading"><a name="section_2.2"></a>2.2. XML</div><p>This specification uses terminology from <a href="#ref-xml" class="ref">[XML]</a> to describe parts of XML documents. Terms used include:</p><ul><li><a name="definition_XML_document"></a><dfn>XML document</dfn>, as defined by <a href="#ref-xml" class="ref">[XML]</a> <a target="_blank" href="http://www.w3.org/TR/2008/REC-xml-20081126/#dt-xml-doc">Section 2, <em>Documents</em></a></li><li><a name="definition_element"></a><dfn>element</dfn>, as defined by <a href="#ref-xml" class="ref">[XML]</a> <a target="_blank" href="http://www.w3.org/TR/2008/REC-xml-20081126/#dt-element">Section 3, <em>Logical Structures</em></a></li><li><a name="definition_attribute"></a><dfn>attribute</dfn>, as described by <a href="#ref-xml" class="ref">[XML]</a> <a target="_blank" href="http://www.w3.org/TR/2008/REC-xml-20081126/#dt-attr">Section 3.1, <em>Start-Tags, End-Tags, and Empty-Element Tags</em></a></li></ul></div><div class="section"><div class="heading"><a name="sec-term-xml-namespaces"></a><a name="section_2.3"></a>2.3. XML Namespaces</div><p>This document uses XML namespaces as defined by <a href="#XMLNamespaces" class="ref">[XMLNamespaces]</a> and <a href="#XMLNamespacesErrata" class="ref">[XMLNamespacesErrata]</a></p></div><div class="section"><div class="heading"><a name="section_2.4"></a>2.4. XML Information Set</div><p><a href="#ref-xmlinfoset" class="ref">[XMLInfoSet]</a> defines terms and properties that describe the values of and relationships between parts of an XML document. This document uses this terminology to refer to content of XML documents. Terminology used includes:</p><ul><li>Property <strong>[document element]</strong> of a document, as defined by <a href="#ref-xmlinfoset" class="ref">[XMLInfoSet]</a> <a target="_blank" href="http://www.w3.org/TR/2004/REC-xml-infoset-20040204/#infoitem.document">Section 2.1, <em>The Document Information Item</em></a></li><li><p>Properties of an element, as defined by <a href="#ref-xmlinfoset" class="ref">[XMLInfoSet]</a> <a target="_blank" href="http://www.w3.org/TR/2004/REC-xml-infoset-20040204/#infoitem.element">Section 2.2, <em>Element Information Items</em></a>:</p><ul><li><strong>[parent]</strong></li><li><strong>[children]</strong></li><li><strong>[attributes]</strong></li></ul></li><li>Property <strong>[owner element]</strong> of an attribute, as defined by <a href="#ref-xmlinfoset" class="ref">[XMLInfoSet]</a> <a target="_blank" href="http://www.w3.org/TR/2004/REC-xml-infoset-20040204/#infoitem.attribute">Section 2.3, <em>Attribute Information Items</em></a>:</li></ul></div><div class="section"><div class="heading"><a name="section_2.5"></a>2.5. XML Schema</div><p>The term <a name="definition_XML_Schema_definition_language"></a><dfn>XML Schema definition language</dfn> is defined by <a href="#ref-xsd1" class="ref">[XMLSchema1]</a>, <a target="_blank" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#abstract"><em>Abstract</em></a>, which states:</p><blockquote><p><em>XML Schema: Structures</em> specifies the XML Schema definition language, which offers facilities for describing the structure and constraining the contents of XML 1.0 documents, including those which exploit the XML Namespace facility. The schema language, which is itself represented in XML 1.0 and uses namespaces, substantially reconstructs and considerably extends the capabilities found in XML 1.0 document type definitions (DTDs).</p></blockquote><p>The term <a name="definition_schema_document"></a><dfn>schema document</dfn> is defined by <a href="#ref-xsd1" class="ref">[XMLSchema1]</a> <a target="_blank" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#key-schemaDoc">Section 3.1.2, <em>XML Representations of Components</em></a>, which states:</p><blockquote><p>A document in this form (i.e. a &lt;schema&gt; element information item) is a <strong>schema document</strong>.</p></blockquote><p>The term <a name="definition_XML_Schema"></a><dfn>XML Schema</dfn> is defined by <a href="#ref-xsd1" class="ref">[XMLSchema1]</a> <a target="_blank" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#key-schema">Section 2.2, <em>XML Schema Abstract Data Model</em></a>, which states:</p><blockquote><p>An <strong>XML Schema</strong> is a set of schema components.</p></blockquote><p>The term <a name="definition_schema_component"></a><dfn>schema component</dfn> is defined by <a href="#ref-xsd1" class="ref">[XMLSchema1]</a> <a target="_blank" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/#key-component">Section 2.2, <em>XML Schema Abstract Data Model</em></a>, which states:</p><blockquote><p><strong>Schema component</strong> is the generic term for the building blocks that comprise the abstract data model of the schema.</p></blockquote></div><div class="section"><div class="heading"><a name="section_2.6"></a>2.6. XSLT 2.0</div><p>The term <a name="definition_basic_XSLT_processor"></a><dfn>basic XSLT processor</dfn> is defined by <a href="#ref-xslt2" class="ref">[XSLT2]</a> <a target="_blank" href="http://www.w3.org/TR/2007/REC-xslt20-20070123/#dt-basic-xslt-processor">Section 21.1, <em>Basic XSLT Processor</em></a>, which states:</p><blockquote><p>A basic XSLT processor is an XSLT processor that implements all the mandatory requirements of this specification with the exception of certain explicitly-identified constructs related to schema processing.</p></blockquote><p>The term <a name="definition_schema-aware_XSLT_processor"></a><dfn>schema-aware XSLT processor</dfn> is defined by <a href="#ref-xslt2" class="ref">[XSLT2]</a> <a target="_blank" href="http://www.w3.org/TR/2007/REC-xslt20-20070123/#dt-schema-aware-xslt-processor">Section 21.2, <em>Schema-Aware XSLT Processor</em></a>, which states:</p><blockquote><p>A schema-aware XSLT processor is an XSLT processor that implements all the mandatory requirements of this specification, including those features that a basic XSLT processor signals as an error.</p></blockquote></div><div class="section"><div class="heading"><a name="section_2.7"></a>2.7. Schematron</div><p>The Schematron specification <a href="#ref-sch" class="ref">[Schematron]</a> coins and uses the term <q>Query Language Binding</q> to refer to the framework that defines the syntax of queries (e.g., <code>test</code> and <code>select</code>) and the types of the results of queries made by a Schematron file. Relevant sections include Section 6.4, <em>Query Language Binding</em>, and Annex C, <em>Default Query Language Binding</em>.</p></div><div class="section"><div class="heading"><a name="section_2.8"></a>2.8. NIEM Conformance Target Attribute Specification</div><p>This specification uses terms from <a href="#ref-ctas" class="ref">[CTAS]</a>, including:</p><ul><li><em>conformant document</em>, as defined by <a href="#ref-ctas" class="ref">[CTAS]</a> <a target="_blank" href="http://reference.niem.gov/niem/specification/conformance-targets-attribute/3.0/NIEM-CTAS-3.0-2014-07-31.html#definition_conformant_document">Section 3.2, <em>Conformance to this Specification</em></a>.</li><li><em>effective conformance target identifier</em>, as defined by <a href="#ref-ctas" class="ref">[CTAS]</a> <a target="_blank" href="http://reference.niem.gov/niem/specification/conformance-targets-attribute/3.0/NIEM-CTAS-3.0-2014-07-31.html#definition_effective_conformance_target_identifier">Section 4, <em>Semantics and Use</em></a>.</li></ul></div><div class="section"><div class="heading"><a name="section_2.9"></a>2.9. NIEM Naming and Design Rules</div><p>The term <a name="definition_application_information"></a><dfn>application information</dfn> (of a <a name="d3e1059"></a><a href="#definition_schema_component"><span class="termRef">schema component</span></a>) is defined by <a href="#NDR" class="ref">[NIEM NDR]</a> <a target="_blank" href="http://reference.niem.gov/niem/specification/naming-and-design-rules/3.0/NIEM-NDR-3.0-2014-07-31.html#definition_application_information">Section 10.9, <em>Machine-readable annotations</em></a>, describing the contents of <code>xs:appinfo</code> annotations on the element that defines a schema component.</p></div></div><div class="section"><div class="heading"><a name="section_3"></a>3. Namespaces used in this document</div><p>Namespace prefixes used in this document:</p><ul><li>xs: <code>http://www.w3.org/2001/XMLSchema</code></li><li>sch: <code>http://purl.oclc.org/dsdl/schematron</code></li><li>six: <code>http://release.niem.gov/niem/sch-in-xsd/1.0/</code></li><li>xsl: <code>http://www.w3.org/1999/XSL/Transform</code></li><li>structures: <code>http://release.niem.gov/niem/structures/3.0/</code></li></ul><div class="figure"><div class="caption"><a name="figure_3-1"></a>Figure 3-1: Schematron namespaces</div><div class="box"><pre>&lt;sch:ns prefix="ct" uri="http://release.niem.gov/niem/conformanceTargets/3.0/"/&gt;
&lt;sch:ns prefix="sch" uri="http://purl.oclc.org/dsdl/schematron"/&gt;
&lt;sch:ns prefix="six" uri="http://release.niem.gov/niem/sch-in-xsd/1.0/"/&gt;
&lt;sch:ns prefix="xsl" uri="http://www.w3.org/1999/XSL/Transform"/&gt;</pre></div></div></div><div class="section"><div class="heading"><a name="section_4"></a>4. Terms and Definitions</div><div class="box"><div class="normativeHead"><a name="definition_schema_document_with_embedded_Schematron"></a>[Definition: <dfn>schema document with embedded Schematron</dfn>]</div><div class="sub"><p>Conformance target identifier: <q>http://reference.niem.gov/niem/specification/sch-in-xsd/1.0/#XSDWithSchematron</q>.</p><p>This conformance target uses the conformance target code <q><a name="conformance_target_ct-xsd"></a>XSD</q></p></div></div><div class="box"><div class="normativeHead"><a name="definition_implied_Schematron_document"></a>[Definition: <dfn>implied Schematron document</dfn>]</div><div class="sub"><p>An <em>implied Schematron document</em> of an <a name="d3e1163"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a> is a Schematron document that is produced by conformant processing of a <a name="d3e1166"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a>.</p></div></div></div><div class="section"><div class="heading"><a name="section_5"></a>5. Rules</div><div class="section"><div class="heading"><a name="section_5.1"></a>5.1. XML Schema rules</div><div class="rule-section"><div class="heading"><a name="rule_5-1"></a>Rule 5-1. Document is an XML Schema document</div><div class="box"><div class="normativeHead">[Rule 5-1] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>The document MUST be a <a name="d3e1191"></a><a href="#definition_schema_document"><span class="termRef">schema document</span></a>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-2"></a>Rule 5-2. Document has <code>xs:schema</code> document element</div><div class="box"><div class="normativeHead">[Rule 5-2] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
  &lt;sch:rule context="/"&gt;
    &lt;sch:assert test="/xs:schema"
                &gt;The document MUST have document element xs:schema.&lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;</pre></div></div><div class="rule-section"><div class="heading"><a name="rule_5-3"></a>Rule 5-3. XML Schema elements do not appear as content of annotations</div><div class="box"><div class="normativeHead">[Rule 5-3] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
  &lt;sch:rule context="xs:*"&gt;
    &lt;sch:assert test="empty(ancestor::xs:appinfo | ancestor::xs:documentation)"
                &gt;An element in the XML Schema namespace MUST NOT appear as content of an XML Schema annotation.&lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;</pre></div></div></div><div class="section"><div class="heading"><a name="section_5.2"></a>5.2. Conformance target rules</div><div class="rule-section"><div class="heading"><a name="rule_5-4"></a>Rule 5-4. Document conforms to Conformance Targets Attribute Specification</div><div class="box"><div class="normativeHead">[Rule 5-4] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>The document MUST be a conformant document, as defined by <a href="#ref-ctas" class="ref">[CTAS]</a>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-5"></a>Rule 5-5. Document has effective conformance target identifier</div><div class="box"><div class="normativeHead">[Rule 5-5] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
  &lt;sch:rule context="/"&gt;
    &lt;sch:assert test="some $conformance-target 
                      in tokenize(normalize-space( (//@ct:conformanceTargets)[1] ), ' ')
                      satisfies $conformance-target = 'http://reference.niem.gov/niem/specification/sch-in-xsd/1.0/#XSDWithSchematron'"
        &gt;The document MUST have an effective conformance target identifier "http://reference.niem.gov/niem/specification/sch-in-xsd/1.0/#XSDWithSchematron".&lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;</pre></div></div></div><div class="section"><div class="heading"><a name="section_5.3"></a>5.3. Rules on <code>six:queryBinding</code></div><div class="rule-section"><div class="heading"><a name="rule_5-6"></a>Rule 5-6. Attribute <code>six:queryBinding</code> owner element is <code>xs:schema</code></div><div class="box"><div class="normativeHead">[Rule 5-6] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
   &lt;sch:rule context="*[@six:queryBinding]"&gt;
     &lt;sch:assert test="self::xs:schema"
         &gt;Attribute six:queryBinding MUST have [owner element] xs:schema&lt;/sch:assert&gt;
   &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;</pre></div></div><div class="rule-section"><div class="heading"><a name="rule_5-7"></a>Rule 5-7. Schema element has query binding</div><div class="box"><div class="normativeHead">[Rule 5-7] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
   &lt;sch:rule context="/xs:schema"&gt;
     &lt;sch:assert test="@six:queryBinding"
         &gt;Document element xs:schema MUST have attribute six:queryBinding&lt;/sch:assert&gt;
   &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;</pre></div></div><div class="rule-section"><div class="heading"><a name="r-query-binding-indicates-query-lang"></a><a name="rule_5-8"></a>Rule 5-8. Attribute <code>six:queryBinding</code> identifies query language</div><div class="box"><div class="normativeHead">[Rule 5-8] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
  &lt;sch:rule context="*[@six:queryBinding]"&gt;
    &lt;sch:assert test="every $token in tokenize(normalize-space(@six:queryBinding),' ')
                      satisfies $token = ('xslt1', 'xslt2', 'xslt2-sa')"
        &gt;Attribute six:queryBinding must indicate query language binding.&lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;</pre></div></div><div class="rule-section"><div class="heading"><a name="rule_5-9"></a>Rule 5-9. Attribute <code>six:queryBinding</code> sets processing expectations</div><div class="box"><div class="normativeHead">[Rule 5-9] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>The application information attribute <code>six:queryBinding</code> on a <a name="d3e1383"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a> contains a list of strings that reflect the processing requirements of Schematron rules appearing within the schema document. The attribute <code>six:queryBinding</code> MUST be interpreted as follows:</p><ul><li><p><q>xslt1</q>:</p><p>The <a name="d3e1401"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> MAY be processed by an XSLT 1.0 processor.</p><p>The <a name="d3e1407"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> MUST have an attribute <code>queryBinding</code> on the document element with a value of <q>xslt</q>.</p></li><li><p><q>xslt2</q>:</p><p>The <a name="d3e1427"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> MAY be processed by either a <a name="d3e1430"></a><a href="#definition_basic_XSLT_processor"><span class="termRef">basic XSLT processor</span></a> or a <a name="d3e1433"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</p><p>The <a name="d3e1439"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> MUST have an attribute <code>queryBinding</code> on the document element with a value of <q>xslt2</q>.</p></li><li><p><q>xslt2-sa</q>:</p><p>The <a name="d3e1459"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> MAY be processed by a <a name="d3e1462"></a><a href="#definition_schema-aware_XSLT_processor"><span class="termRef">schema-aware XSLT processor</span></a>.</p><p>The <a name="d3e1468"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> MUST have an attribute <code>queryBinding</code> on the document element with a value of <q>xslt2</q>.</p></li></ul></div><p>There is no query language binding defined by <a href="#ref-sch" class="ref">[Schematron]</a> that indicates schema-aware processing versus basic processing. The schema-aware and basic XSLT processors are defined by <a href="#ref-xslt2" class="ref">[XSLT2]</a>, not by <a href="#ref-xpath2" class="ref">[XPath2]</a>, so there is no normative source for how to process a Schematron document with query language binding of <q>xpath2</q>.</p><p>The <q>xslt2</q> query binding implies <q>xslt2-sa</q>. Including both is redundant, but harmless.</p></div></div><div class="section"><div class="heading"><a name="section_5.4"></a>5.4. Rules on namespaces</div><div class="rule-section"><div class="heading"><a name="rule_5-10"></a>Rule 5-10. Namespace prefixes declared only on the document element</div><div class="box"><div class="normativeHead">[Rule 5-10] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
  &lt;sch:rule context="*[not(self::* is /*)]"&gt;
    &lt;sch:let name="element" value="."/&gt;
    &lt;sch:let name="parent" value="$element/parent::*"/&gt;
    &lt;sch:let name="element-prefixes" value="in-scope-prefixes($element)"/&gt;
    &lt;sch:let name="parent-prefixes" value="in-scope-prefixes($parent)"/&gt;
    &lt;sch:assert test="every $prefix in $element-prefixes 
                      satisfies ($prefix = $parent-prefixes
                                 and namespace-uri-for-prefix($prefix, $element) 
                                     = namespace-uri-for-prefix($prefix, $parent))
                      and (every $prefix
                           in $parent-prefixes
                           satisfies $prefix = $element-prefixes)"
        &gt;The document MUST NOT have a namespace prefix definition on any element that is not the document element.&lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;            </pre></div></div><div class="rule-section"><div class="heading"><a name="rule_5-11"></a>Rule 5-11. No use of <code>sch:ns</code></div><div class="box"><div class="normativeHead">[Rule 5-11] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>A component of a <a name="d3e1550"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a> MUST NOT have <a name="d3e1553"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> that is an element <code>sch:ns</code>.</p></div><p>All namespace declarations in the implied Schematron document are originated from the namespace declarations appearing on the document element <code>xs:schema</code>.</p></div><div class="rule-section"><div class="heading"><a name="rule_5-12"></a>Rule 5-12. Implied Schematron document has <code>sch:ns</code></div><div class="box"><div class="normativeHead">[Rule 5-12] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>The <a name="d3e1579"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> of <a name="d3e1582"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a> <var>$document</var> MUST have a <code>sch:ns</code> element corresponding to each namespace declaration that occurs on the [document element] of <var>$document</var>.</p></div></div></div><div class="section"><div class="heading"><a name="section_5.5"></a>5.5. Schematron throughout the document</div><div class="rule-section"><div class="heading"><a name="rule_5-13"></a>Rule 5-13. Implied Schematron document contains application information from document</div><div class="box"><div class="normativeHead">[Rule 5-13] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>The <a name="d3e1613"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> of <a name="d3e1616"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a> <var>$document</var> MUST contain, preserving document order, content corresponding to:</p><ul><li>element application information of the [document element] <code>xs:schema</code> of <var>$document</var> that has the namespace corresponding to the prefixes <q>sch</q> and <q>xsl</q>,</li><li>element <a name="d3e1644"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> of any element <code>sch:pattern</code> within <var>$document</var>, and</li><li>other corresponding content of an <a name="d3e1657"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a>, as defined by this specification.</li></ul></div><p>Note that the namespace prefixes <q>sch</q> and <q>xsl</q> are defined for this document in <a href="#section_2.3">Section 2.3, <em>XML Namespaces</em>, above</a>.</p></div></div><div class="section"><div class="heading"><a name="section_5.6"></a>5.6. Occurrence of Schematron content</div><div class="rule-section"><div class="heading"><a name="rule_5-14"></a>Rule 5-14. XSLT elements allowed only as top-level annotations</div><div class="box"><div class="normativeHead">[Rule 5-14] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
  &lt;sch:rule context="xs:*/xsl:*"&gt;
    &lt;sch:assert test="parent::xs:appinfo[parent::xs:annotation[.. is /xs:schema]]"
      &gt;An XSLT element MUST be application information on the schema document.&lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;              </pre></div></div><div class="rule-section"><div class="heading"><a name="rule_5-15"></a>Rule 5-15. Most Schematron elements allowed only as top-level annotations</div><div class="box"><div class="normativeHead">[Rule 5-15] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
  &lt;sch:rule context="xs:*/sch:*[not(self::sch:assert)
                                and not(self::sch:report)
                                and not(self::sch:let)]"&gt;
    &lt;sch:assert test="parent::xs:appinfo[parent::xs:annotation[.. is /xs:schema]]"
      &gt;A Schematron element other than sch:assert, sch:report, and sch:let MUST be application information on the schema document.&lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;</pre></div></div><div class="rule-section"><div class="heading"><a name="rule_5-16"></a>Rule 5-16. Schematron assert, report, let allowed on particular components</div><div class="box"><div class="normativeHead">[Rule 5-16] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><pre>&lt;sch:pattern&gt;
  &lt;sch:rule context="xs:*/sch:assert
                     | xs:*/sch:report 
                     | xs:*/sch:let"&gt;
    &lt;sch:assert test="parent::xs:appinfo[parent::xs:annotation[parent::xs:*[
                        (: top-level components :)
                        ( ( self::xs:element or self::xs:attribute 
                            or self::xs:complexType or self::xs:simpleType )
                          and ( .. is /xs:schema ) )
                        (: element and attribute uses :)
                        or ( ( self::xs:element[@ref] or self::xs:attribute[@ref] )
                             and ancestor::xs:complexType[.. is /xs:schema] ) ]]]"
      &gt;A Schematron assert, report, or let element MUST be application information on one of: a global attribute declaration, a global element declaration, a global complex type definition, a global simple type definition, a global element particle within a global complex type definition, or a global attribute use within a global complex type definition.&lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
&lt;/sch:pattern&gt;              </pre></div></div><div class="rule-section"><div class="heading"><a name="rule_5-17"></a>Rule 5-17. Application information corresponds to a valid Schematron document</div><div class="box"><div class="normativeHead">[Rule 5-17] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>The document MUST NOT contain any annotations from the <q>sch</q> or <q>xsl</q> namespaces that would result in an invalid <a name="d3e1762"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-18"></a>Rule 5-18. Schema component definitions have limited Schematron content</div><div class="box"><div class="normativeHead">[Rule 5-18] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>Elements other than <code>xs:schema</code> MUST NOT have <a name="d3e1781"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> in the <q>sch</q> namespace other than:</p><ul><li>Any element with the namespace corresponding to the prefix <q>xs</q> MAY have <a name="d3e1796"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> <code>sch:pattern</code>.</li><li>Other XML Schema component-defining elements MAY have specific application information in the namespace corresponding to the prefix <q>sch</q> only as explicitly allowed by other rules in this specification.</li></ul></div></div></div><div class="section"><div class="heading"><a name="section_5.7"></a>5.7. Top-level attribute declaration</div><div class="rule-section"><div class="heading"><a name="rule_5-19"></a>Rule 5-19. Schematron application information allowed on top-level attribute declaration</div><div class="box"><div class="normativeHead">[Rule 5-19] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>An element <code>xs:attribute</code> with [parent] element <code>xs:schema</code> MAY have have application information elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-20"></a>Rule 5-20. Application information of top-level attribute declaration entails pattern</div><div class="box"><div class="normativeHead">[Rule 5-20] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>The content in an <a name="d3e1855"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> corresponding to occurrences of elements <code>sch:let</code>, <code>sch:assert</code>, or <code>sch:report</code> as <a name="d3e1867"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> of an element <code>xs:attribute</code> with [parent] element <code>xs:schema</code> corresponds to an occurrence of element <code>sch:pattern</code> with [children] containing an element <code>sch:rule</code>, with context that applies to any element with [attributes] containing that attribute. This <code>sch:rule</code> has [children] containing elements that correspond to the elements <code>sch:let</code>, <code>sch:assert</code>, or <code>sch:report</code>, preserving document order.</p></div></div></div><div class="section"><div class="heading"><a name="section_5.8"></a>5.8. Top-level element declaration</div><div class="rule-section"><div class="heading"><a name="rule_5-21"></a>Rule 5-21. Schematron application information allowed on top-level element declaration</div><div class="box"><div class="normativeHead">[Rule 5-21] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>An element <code>xs:element</code> with [parent] element <code>xs:schema</code> MAY have have <a name="d3e1920"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-22"></a>Rule 5-22. Application information of top-level element declaration entails pattern</div><div class="box"><div class="normativeHead">[Rule 5-22] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>The content in an <a name="d3e1945"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> corresponding to occurrences of <code>sch:let</code>, <code>sch:assert</code>, or <code>sch:report</code> on an element <code>xs:element</code> with [parent] element <code>xs:schema</code> corresponds to an occurrence of element <code>sch:pattern</code> with child element <code>sch:rule</code>, with context that applies to any occurrence of that element, or an element in the substitution group of that element. This <code>sch:rule</code> has [children] containing elements corresponding to <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>, preserving document order.</p></div></div></div><div class="section"><div class="heading"><a name="section_5.9"></a>5.9. Top-level complex type definition</div><div class="rule-section"><div class="heading"><a name="rule_5-23"></a>Rule 5-23. Schematron application information allowed on top-level complex type definition</div><div class="box"><div class="normativeHead">[Rule 5-23] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>An element <code>xs:complexType</code> with [parent] element <code>xs:schema</code> MAY have have application information elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-24"></a>Rule 5-24. Application information of top-level complex type definition entails pattern</div><div class="box"><div class="normativeHead">[Rule 5-24] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>The content in an <a name="d3e2028"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> corresponding to occurrences of <code>sch:let</code>, <code>sch:assert</code>, or <code>sch:report</code> on an element <code>xs:complexType</code> with [parent] element <code>xs:schema</code> corresponds to an occurrence of element <code>sch:pattern</code> with child element <code>sch:rule</code>, with context that applies to any occurrence of an element that is of that type, or is of a type derived from that type. This <code>sch:rule</code> has children of corresponding to <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>, preserving document order.</p></div></div></div><div class="section"><div class="heading"><a name="section_5.10"></a>5.10. Top-level simple type definition</div><div class="rule-section"><div class="heading"><a name="rule_5-25"></a>Rule 5-25. Schematron application information allowed on top-level simple type definition</div><div class="box"><div class="normativeHead">[Rule 5-25] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>An element <code>xs:simpleType</code> with [parent] element <code>xs:schema</code> MAY have have application information elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-26"></a>Rule 5-26. Application information of top-level simple type definition entails patterns</div><div class="box"><div class="normativeHead">[Rule 5-26] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>The content in an <a name="d3e2111"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> corresponding to a set of occurrences of <code>sch:let</code>, <code>sch:assert</code>, or <code>sch:report</code> on an element <code>xs:simpleType</code> with [parent] element <code>xs:schema</code> corresponds to zero or more occurrence of element <code>sch:pattern</code>, each with [children] containing element <code>sch:rule</code>, with <code>context</code> that applies to any occurrence of an element that is of that type, or is of a type derived from that type. This <code>sch:rule</code> establishes a variable <var>$six:value</var> that has a value of the instance content that is of the simple type. This <code>sch:rule</code> has subsequent element children of corresponding to the <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code> from the document, preserving document order. </p></div><p>Simple type definitions are particularly tricky, in that Schematron processors generally do not support rule context on specific simple content; contexts on text nodes or attribute values will yield errors and warnings. For this reason, simple content values need a level of redirection; a separate Schematron <code>sch:pattern</code> may be established for each element of a simple type, each element with simple content of a simple type, or each attribute of a simple type. Each of these is defined as needed; multiple patterns will primarily be needed when schema-aware XSLT is not the target of the generated Schematron document.</p></div></div><div class="section"><div class="heading"><a name="section_5.11"></a>5.11. Element use within a complex type</div><div class="rule-section"><div class="heading"><a name="rule_5-27"></a>Rule 5-27. Schematron application information allowed on element use in a top-level complex type definition</div><div class="box"><div class="normativeHead">[Rule 5-27] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>An element matching the XPath expression</p><div class="sub"><pre>/xs:schema/xs:complexType//xs:element[@ref]</pre></div><p>MAY have have application information elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-28"></a>Rule 5-28. Application information of element use in top-level complex type definition entails pattern</div><div class="box"><div class="normativeHead">[Rule 5-28] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>Content of a <a name="d3e2213"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a> corresponding to the elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code> that are <a name="d3e2225"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> on an element matching the XPath expression:</p><div class="sub"><pre>/xs:schema/xs:complexType//xs:element[@ref]</pre></div><p>has corresponds to an <a name="d3e2237"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> with an occurrence of element <code>sch:pattern</code> with [children] containing element <code>sch:rule</code> with <code>context</code> that applies to any occurrence of the element identified by the <code>ref</code> attribute, or any element that may be substituted for that element, that occurs within any element that has the identified complex type, or a type derived from that complex type. This <code>sch:rule</code> has [children] elements corresponding to <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>, preserving document order.</p></div></div></div><div class="section"><div class="heading"><a name="section_5.12"></a>5.12. Attribute use within a complex type</div><div class="rule-section"><div class="heading"><a name="rule_5-29"></a>Rule 5-29. Schematron application information allowed on attribute use in top-level complex type definition</div><div class="box"><div class="normativeHead">[Rule 5-29] (<a href="#conformance_target_ct-xsd">XSD</a>) (Constraint)</div><p>An element matching the XPath expression</p><div class="sub"><pre>/xs:schema/xs:complexType//xs:attribute[@ref]</pre></div><p>MAY have have application information elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>.</p></div></div><div class="rule-section"><div class="heading"><a name="rule_5-30"></a>Rule 5-30. Application information of attribute use in top-level complex type definition entails pattern</div><div class="box"><div class="normativeHead">[Rule 5-30] (<a href="#conformance_target_ct-xsd">XSD</a>) (Interpretation)</div><p>Within a <a name="d3e2313"></a><a href="#definition_schema_document_with_embedded_Schematron"><span class="termRef">schema document with embedded Schematron</span></a>, elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code> that are <a name="d3e2325"></a><a href="#definition_application_information"><span class="termRef">application information</span></a> on an element matching the XPath expression:</p><div class="sub"><pre>/xs:schema/xs:complexType//xs:attribute[@ref]</pre></div><p>corresponds to a <a name="d3e2337"></a><a href="#definition_implied_Schematron_document"><span class="termRef">implied Schematron document</span></a> with an occurrence of element <code>sch:pattern</code> with [children] containing element <code>sch:rule</code> with attribute <code>context</code> that applies to any occurrence of an element that has the identified complex type, or a type derived from that complex type, that owns the attribute identified by the <code>ref</code> attribute. This <code>sch:rule</code> has [children] elements corresponding to elements <code>sch:let</code>, <code>sch:assert</code>, and <code>sch:report</code>, preserving document order.</p></div></div></div></div><div class="section"><div class="heading"><a name="section_6"></a>6. XPath functions usable within XSLT 2.0 Schematron expressions</div><div class="section"><div class="heading"><a name="section_6.1"></a>6.1. Function <code>six:resolve</code></div><p>The function <code>six:resolve</code> is designed to resolve NIEM reference elements to their targets, to simplify XPath expressions.</p><p>Function interface:</p><div class="sub"><pre>six:resolve($elements as element()*) as element()*</pre></div><p>The function <code>six:resolve</code> yields:</p><div class="sub"><p>If <var>$elements</var> is an <code>empty-sequence()</code>, then yield <code>'()'</code>, an empty sequence.</p><p>Otherwise, for each <var>$element</var> in sequence <var>$elements</var>, yield:</p><div class="sub"><p>If <var>$element</var> has attribute <code>structures:ref</code> <var>$ref</var>, yield:</p><div class="sub"><p>If there is an element <var>$target</var> with attribute <code>structures:id</code> with value <var>$ref</var>, then yield <var>$target</var></p><p>Otherwise, yield <code>'()'</code>, an empty sequence. It is RECOMMENDED that implementations indicate an error if this case occurs.</p></div><p>Otherwise, yield <var>$element</var>.</p></div></div></div></div><div class="section"><div class="heading"><a name="appendix_A"></a>Appendix A. References</div><p class="hang"><a name="ref-ctas"></a><span class="ref">[CTAS]</span>: Roberts, Webb. <q>NIEM Conformance Targets Attribute Specification, Version 3.0.</q> NIEM Technical Architecture Committee, July 31, 2014. <a class="url" target="_blank" href="http://reference.niem.gov/niem/specification/conformance-targets-attribute/3.0/NIEM-CTAS-3.0-2014-07-31.html">http://reference.niem.gov/niem/specification/conformance-targets-attribute/3.0/NIEM-CTAS-3.0-2014-07-31.html</a>.</p><div class="sub"></div><p class="hang"><a name="NDR"></a><span class="ref">[NIEM NDR]</span>: Roberts, Webb. <q>National Information Exchange Model Naming and Design Rules, Version 3.0.</q> NIEM Technical Architecture Committee, July 31, 2014. <a class="url" target="_blank" href="http://reference.niem.gov/niem/specification/naming-and-design-rules/3.0/NIEM-NDR-3.0-2014-07-31.html">http://reference.niem.gov/niem/specification/naming-and-design-rules/3.0/NIEM-NDR-3.0-2014-07-31.html</a>.</p><div class="sub"></div><p class="hang"><a name="RFC2119"></a><span class="ref">[RFC2119]</span>: Bradner, S. <q>Key words for use in RFCs to Indicate Requirement Levels</q>, IETF RFC 2119, March 1997. Available from <a class="url" target="_blank" href="http://www.ietf.org/rfc/rfc2119.txt">http://www.ietf.org/rfc/rfc2119.txt</a>.</p><div class="sub"></div><p class="hang"><a name="ref-sch"></a><span class="ref">[Schematron]</span>: <q>ISO/IEC STANDARD 19757-3: Information Technology — Document Schema Definition Languages (DSDL) Part 3: Rule-Based Validation — Schematron.</q> ISO/IEC, June 1, 2006. <a class="url" target="_blank" href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c040833_ISO_IEC_19757-3_2006(E).zip">http://standards.iso.org/ittf/PubliclyAvailableStandards/c040833_ISO_IEC_19757-3_2006(E).zip</a>.</p><div class="sub"></div><p class="hang"><a name="ref-xml"></a><span class="ref">[XML]</span>: Bray, Tim, Jean Paoli, C. M. Sperberg-McQueen, Eve Maler, and François Yergeau. <q>Extensible Markup Language (XML) 1.0 (Fifth Edition).</q> The World Wide Web Consortium (W3C), November 26, 2008. <a class="url" target="_blank" href="http://www.w3.org/TR/2008/REC-xml-20081126/">http://www.w3.org/TR/2008/REC-xml-20081126/</a>.</p><div class="sub"></div><p class="hang"><a name="ref-xmlinfoset"></a><span class="ref">[XMLInfoSet]</span>: Cowan, John, and Richard Tobin. <q>XML Information Set (Second Edition),</q> February 4, 2004. <a class="url" target="_blank" href="http://www.w3.org/TR/2004/REC-xml-infoset-20040204/">http://www.w3.org/TR/2004/REC-xml-infoset-20040204/</a>.</p><div class="sub"></div><p class="hang"><a name="XMLNamespaces"></a><span class="ref">[XMLNamespaces]</span>: Bray, T., Hollander, D., Layman, A., Tobin, R., &amp; Thompson, H. S. (2009, December 8). <em>Namespaces in XML 1.0 (Third Edition)</em>. W3C. Retrieved from <a class="url" target="_blank" href="http://www.w3.org/TR/2009/REC-xml-names-20091208/">http://www.w3.org/TR/2009/REC-xml-names-20091208/</a></p><div class="sub"></div><p class="hang"><a name="XMLNamespacesErrata"></a><span class="ref">[XMLNamespacesErrata]</span>: <q>Namespaces in XML Errata</q>, 6 December 2002. Available from <a class="url" target="_blank" href="http://www.w3.org/XML/xml-names-19990114-errata">http://www.w3.org/XML/xml-names-19990114-errata</a>.</p><div class="sub"></div><p class="hang"><a name="ref-xsd1"></a><span class="ref">[XMLSchema1]</span>: <q>XML Schema Part 1: Structures Second Edition</q>, W3C Recommendation, 28 October 2004. Available from <a class="url" target="_blank" href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/">http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/</a>.</p><div class="sub"></div><p class="hang"><a name="ref-xpath2"></a><span class="ref">[XPath2]</span>: Berglund, Anders, Scott Boag, Don Chamberlin, Mary F. Fernández, Michael Kay, Jonathan Robie, and Jérôme Siméon. <q>XML Path Language (XPath) 2.0 (Second Edition).</q> W3C, January 3, 2011. <a class="url" target="_blank" href="http://www.w3.org/TR/2010/REC-xpath20-20101214/">http://www.w3.org/TR/2010/REC-xpath20-20101214/</a></p><div class="sub"></div><p class="hang"><a name="ref-xslt2"></a><span class="ref">[XSLT2]</span>: Kay, Michael. <q>XSL Transformations (XSLT) Version 2.0.</q> W3C, January 23, 2007. <a class="url" target="_blank" href="http://www.w3.org/TR/2007/REC-xslt20-20070123/">http://www.w3.org/TR/2007/REC-xslt20-20070123/</a>.</p><div class="sub"></div></div><div class="section"><div class="heading"><a name="appendix_B"></a>Appendix B. Schema document for Schematron in XSD vocabulary (informative)</div><p>This schema document is provided to support the user, but is not considered normative. The syntax of <code>six:queryBinding</code> is provided via <a href="#rule_5-8">Rule 5-8, <em>Attribute <code>six:queryBinding</code> identifies query language</em> (XSD), above</a>.</p><pre>&lt;?xml version="1.0" encoding="us-ascii"?&gt;
&lt;schema targetNamespace="http://release.niem.gov/niem/sch-in-xsd/1.0/"
        xmlns="http://www.w3.org/2001/XMLSchema"&gt;
  &lt;annotation&gt;
    &lt;documentation&gt;This is a schema for a vocabulary for use by XML Schema
      documents that conform to "Embedding Schematron in XML Schema Documents",
      version 1.0.&lt;/documentation&gt;
  &lt;/annotation&gt;
  
  &lt;attribute name="queryBinding"&gt;
    &lt;simpleType&gt;
      &lt;list&gt;
        &lt;simpleType&gt;
          &lt;restriction base="string"&gt;
            &lt;enumeration value="xslt1"/&gt;
            &lt;enumeration value="xslt2"/&gt;
            &lt;enumeration value="xslt2-sa"/&gt;
          &lt;/restriction&gt;
        &lt;/simpleType&gt;
      &lt;/list&gt;
    &lt;/simpleType&gt;
  &lt;/attribute&gt;
  
&lt;/schema&gt;
</pre></div><div class="section"><div class="heading"><a name="appendix_C"></a>Appendix C. Index of Rules</div><ul><li><a href="#rule_5-1">Rule 5-1, <em>Document is an XML Schema document</em> (XSD)</a>: <a href="#section_5.1">Section 5.1, <em>XML Schema rules</em></a></li><li><a href="#rule_5-2">Rule 5-2, <em>Document has <code>xs:schema</code> document element</em> (XSD)</a>: <a href="#section_5.1">Section 5.1, <em>XML Schema rules</em></a></li><li><a href="#rule_5-3">Rule 5-3, <em>XML Schema elements do not appear as content of annotations</em> (XSD)</a>: <a href="#section_5.1">Section 5.1, <em>XML Schema rules</em></a></li><li><a href="#rule_5-4">Rule 5-4, <em>Document conforms to Conformance Targets Attribute Specification</em> (XSD)</a>: <a href="#section_5.2">Section 5.2, <em>Conformance target rules</em></a></li><li><a href="#rule_5-5">Rule 5-5, <em>Document has effective conformance target identifier</em> (XSD)</a>: <a href="#section_5.2">Section 5.2, <em>Conformance target rules</em></a></li><li><a href="#rule_5-6">Rule 5-6, <em>Attribute <code>six:queryBinding</code> owner element is <code>xs:schema</code></em> (XSD)</a>: <a href="#section_5.3">Section 5.3, <em>Rules on <code>six:queryBinding</code></em></a></li><li><a href="#rule_5-7">Rule 5-7, <em>Schema element has query binding</em> (XSD)</a>: <a href="#section_5.3">Section 5.3, <em>Rules on <code>six:queryBinding</code></em></a></li><li><a href="#rule_5-8">Rule 5-8, <em>Attribute <code>six:queryBinding</code> identifies query language</em> (XSD)</a>: <a href="#section_5.3">Section 5.3, <em>Rules on <code>six:queryBinding</code></em></a></li><li><a href="#rule_5-9">Rule 5-9, <em>Attribute <code>six:queryBinding</code> sets processing expectations</em> (XSD)</a>: <a href="#section_5.3">Section 5.3, <em>Rules on <code>six:queryBinding</code></em></a></li><li><a href="#rule_5-10">Rule 5-10, <em>Namespace prefixes declared only on the document element</em> (XSD)</a>: <a href="#section_5.4">Section 5.4, <em>Rules on namespaces</em></a></li><li><a href="#rule_5-11">Rule 5-11, <em>No use of <code>sch:ns</code></em> (XSD)</a>: <a href="#section_5.4">Section 5.4, <em>Rules on namespaces</em></a></li><li><a href="#rule_5-12">Rule 5-12, <em>Implied Schematron document has <code>sch:ns</code></em> (XSD)</a>: <a href="#section_5.4">Section 5.4, <em>Rules on namespaces</em></a></li><li><a href="#rule_5-13">Rule 5-13, <em>Implied Schematron document contains application information from document</em> (XSD)</a>: <a href="#section_5.5">Section 5.5, <em>Schematron throughout the document</em></a></li><li><a href="#rule_5-14">Rule 5-14, <em>XSLT elements allowed only as top-level annotations</em> (XSD)</a>: <a href="#section_5.6">Section 5.6, <em>Occurrence of Schematron content</em></a></li><li><a href="#rule_5-15">Rule 5-15, <em>Most Schematron elements allowed only as top-level annotations</em> (XSD)</a>: <a href="#section_5.6">Section 5.6, <em>Occurrence of Schematron content</em></a></li><li><a href="#rule_5-16">Rule 5-16, <em>Schematron assert, report, let allowed on particular components</em> (XSD)</a>: <a href="#section_5.6">Section 5.6, <em>Occurrence of Schematron content</em></a></li><li><a href="#rule_5-17">Rule 5-17, <em>Application information corresponds to a valid Schematron document</em> (XSD)</a>: <a href="#section_5.6">Section 5.6, <em>Occurrence of Schematron content</em></a></li><li><a href="#rule_5-18">Rule 5-18, <em>Schema component definitions have limited Schematron content</em> (XSD)</a>: <a href="#section_5.6">Section 5.6, <em>Occurrence of Schematron content</em></a></li><li><a href="#rule_5-19">Rule 5-19, <em>Schematron application information allowed on top-level attribute declaration</em> (XSD)</a>: <a href="#section_5.7">Section 5.7, <em>Top-level attribute declaration</em></a></li><li><a href="#rule_5-20">Rule 5-20, <em>Application information of top-level attribute declaration entails pattern</em> (XSD)</a>: <a href="#section_5.7">Section 5.7, <em>Top-level attribute declaration</em></a></li><li><a href="#rule_5-21">Rule 5-21, <em>Schematron application information allowed on top-level element declaration</em> (XSD)</a>: <a href="#section_5.8">Section 5.8, <em>Top-level element declaration</em></a></li><li><a href="#rule_5-22">Rule 5-22, <em>Application information of top-level element declaration entails pattern</em> (XSD)</a>: <a href="#section_5.8">Section 5.8, <em>Top-level element declaration</em></a></li><li><a href="#rule_5-23">Rule 5-23, <em>Schematron application information allowed on top-level complex type definition</em> (XSD)</a>: <a href="#section_5.9">Section 5.9, <em>Top-level complex type definition</em></a></li><li><a href="#rule_5-24">Rule 5-24, <em>Application information of top-level complex type definition entails pattern</em> (XSD)</a>: <a href="#section_5.9">Section 5.9, <em>Top-level complex type definition</em></a></li><li><a href="#rule_5-25">Rule 5-25, <em>Schematron application information allowed on top-level simple type definition</em> (XSD)</a>: <a href="#section_5.10">Section 5.10, <em>Top-level simple type definition</em></a></li><li><a href="#rule_5-26">Rule 5-26, <em>Application information of top-level simple type definition entails patterns</em> (XSD)</a>: <a href="#section_5.10">Section 5.10, <em>Top-level simple type definition</em></a></li><li><a href="#rule_5-27">Rule 5-27, <em>Schematron application information allowed on element use in a top-level complex type definition</em> (XSD)</a>: <a href="#section_5.11">Section 5.11, <em>Element use within a complex type</em></a></li><li><a href="#rule_5-28">Rule 5-28, <em>Application information of element use in top-level complex type definition entails pattern</em> (XSD)</a>: <a href="#section_5.11">Section 5.11, <em>Element use within a complex type</em></a></li><li><a href="#rule_5-29">Rule 5-29, <em>Schematron application information allowed on attribute use in top-level complex type definition</em> (XSD)</a>: <a href="#section_5.12">Section 5.12, <em>Attribute use within a complex type</em></a></li><li><a href="#rule_5-30">Rule 5-30, <em>Application information of attribute use in top-level complex type definition entails pattern</em> (XSD)</a>: <a href="#section_5.12">Section 5.12, <em>Attribute use within a complex type</em></a></li></ul></div><div class="section"><div class="heading"><a name="appendix_D"></a>Appendix D. Index of Definitions</div><ul><li><a href="#definition_application_information">application information</a>: <a href="#section_2.9">Section 2.9, <em>NIEM Naming and Design Rules</em></a></li><li><a href="#definition_attribute">attribute</a>: <a href="#section_2.2">Section 2.2, <em>XML</em></a></li><li><a href="#definition_basic_XSLT_processor">basic XSLT processor</a>: <a href="#section_2.6">Section 2.6, <em>XSLT 2.0</em></a></li><li><a href="#definition_element">element</a>: <a href="#section_2.2">Section 2.2, <em>XML</em></a></li><li><a href="#definition_implied_Schematron_document">implied Schematron document</a>: <a href="#section_4">Section 4, <em>Terms and Definitions</em></a></li><li><a href="#definition_schema_component">schema component</a>: <a href="#section_2.5">Section 2.5, <em>XML Schema</em></a></li><li><a href="#definition_schema_document">schema document</a>: <a href="#section_2.5">Section 2.5, <em>XML Schema</em></a></li><li><a href="#definition_schema_document_with_embedded_Schematron">schema document with embedded Schematron</a>: <a href="#section_4">Section 4, <em>Terms and Definitions</em></a></li><li><a href="#definition_schema-aware_XSLT_processor">schema-aware XSLT processor</a>: <a href="#section_2.6">Section 2.6, <em>XSLT 2.0</em></a></li><li><a href="#definition_XML_document">XML document</a>: <a href="#section_2.2">Section 2.2, <em>XML</em></a></li><li><a href="#definition_XML_Schema">XML Schema</a>: <a href="#section_2.5">Section 2.5, <em>XML Schema</em></a></li><li><a href="#definition_XML_Schema_definition_language">XML Schema definition language</a>: <a href="#section_2.5">Section 2.5, <em>XML Schema</em></a></li></ul></div></body></html>